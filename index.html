<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Globalny Edytor - Tekst Widoczny dla Wszystkich</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --accent: #f59e0b;
            --danger: #ef4444;
            --dark-bg: #0f172a;
            --darker-bg: #0a0f1f;
            --card-bg: #1e293b;
            --text: #e2e8f0;
            --text-secondary: #94a3b8;
            --border: #334155;
            --online: #22c55e;
            --offline: #ef4444;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker-bg) 0%, var(--dark-bg) 100%);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        /* T≈Ço z animacjƒÖ */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(37, 99, 235, 0.1), transparent);
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, 30px) rotate(120deg); }
            66% { transform: translate(-20px, 40px) rotate(240deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }
        
        .glow-effect {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 800px;
            height: 800px;
            background: radial-gradient(circle, rgba(37, 99, 235, 0.05) 0%, transparent 70%);
            z-index: -1;
            animation: pulse 4s infinite alternate;
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.1); }
        }
        
        /* Kontener g≈Ç√≥wny */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        /* Nag≈Ç√≥wek */
        header {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 20px;
            z-index: 100;
            animation: slideDown 0.8s ease;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            color: white;
            animation: glow 2s infinite alternate;
            box-shadow: 0 0 20px rgba(37, 99, 235, 0.5);
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 20px rgba(37, 99, 235, 0.5); }
            100% { box-shadow: 0 0 30px rgba(37, 99, 235, 0.8); }
        }
        
        .logo h1 {
            font-size: 30px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .logo-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 5px;
        }
        
        /* Panel u≈ºytkownika */
        .user-panel {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(15, 23, 42, 0.8);
            padding: 12px 20px;
            border-radius: 15px;
            border: 2px solid var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .user-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
        }
        
        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 22px;
            color: white;
            position: relative;
        }
        
        .online-dot {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 12px;
            height: 12px;
            background-color: var(--online);
            border-radius: 50%;
            border: 2px solid var(--card-bg);
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
        }
        
        .username {
            font-weight: bold;
            font-size: 18px;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .user-status {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--online);
            animation: blink 2s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Licznik online - REALNY */
        .online-counter {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            padding: 10px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: pulseOnline 3s infinite;
        }
        
        @keyframes pulseOnline {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
        }
        
        .online-count {
            font-size: 28px;
            font-weight: bold;
            color: var(--online);
            text-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
        }
        
        .online-label {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* G≈Ç√≥wna zawarto≈õƒá */
        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            animation: fadeIn 1s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* Panel boczny */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .panel {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }
        
        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        .panel h2 {
            color: var(--text);
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }
        
        .panel h2 i {
            color: var(--primary);
        }
        
        /* U≈ºytkownicy online - PRAWDZIWI */
        .users-online-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .users-online-list::-webkit-scrollbar {
            width: 6px;
        }
        
        .users-online-list::-webkit-scrollbar-track {
            background: var(--darker-bg);
            border-radius: 3px;
        }
        
        .users-online-list::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
        
        .online-user-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            margin-bottom: 10px;
            background: var(--darker-bg);
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .online-user-item:hover {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.1);
            transform: translateX(5px);
        }
        
        .online-user-item.active {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.2);
            box-shadow: 0 0 20px rgba(37, 99, 235, 0.3);
        }
        
        .user-activity {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 3px;
        }
        
        .user-activity.editing {
            color: var(--accent);
        }
        
        /* Statystyki globalne */
        .global-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .global-stat-item {
            background: var(--darker-bg);
            padding: 18px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }
        
        .global-stat-item:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }
        
        .global-stat-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(37, 99, 235, 0.5);
        }
        
        .global-stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Edytor g≈Ç√≥wny - GLOBALNY TEKST */
        .editor-container {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--border);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .editor-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 26px;
            color: var(--text);
        }
        
        .editor-title i {
            color: var(--primary);
            animation: spin 10s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Tekst globalny info */
        .global-text-info {
            background: rgba(37, 99, 235, 0.1);
            border: 1px solid rgba(37, 99, 235, 0.3);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: highlight 2s ease;
        }
        
        @keyframes highlight {
            0% { background: rgba(37, 99, 235, 0.3); }
            100% { background: rgba(37, 99, 235, 0.1); }
        }
        
        .global-text-info i {
            color: var(--primary);
            font-size: 24px;
        }
        
        /* Statystyki tekstu */
        .text-stats {
            display: flex;
            gap: 20px;
            background: var(--darker-bg);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
        }
        
        .text-stat {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .text-stat::after {
            content: '';
            position: absolute;
            right: 0;
            top: 20%;
            height: 60%;
            width: 1px;
            background: var(--border);
        }
        
        .text-stat:last-child::after {
            display: none;
        }
        
        .text-stat-value {
            font-size: 36px;
            font-weight: bold;
            color: var(--primary);
            text-shadow: 0 0 15px rgba(37, 99, 235, 0.5);
        }
        
        .text-stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 5px;
        }
        
        /* Pole tekstowe GLOBALNE */
        .textarea-container {
            position: relative;
            margin-bottom: 25px;
        }
        
        textarea {
            width: 100%;
            min-height: 450px;
            padding: 25px;
            background: var(--darker-bg);
            border: 2px solid var(--border);
            border-radius: 15px;
            color: var(--text);
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 25px rgba(37, 99, 235, 0.4);
        }
        
        .textarea-overlay {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 12px;
            color: var(--text-secondary);
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 12px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
        }
        
        /* Przyciski akcji */
        .editor-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-size: 16px;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #0da271);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }
        
        .btn-accent {
            background: linear-gradient(135deg, var(--accent), #d97706);
            color: white;
        }
        
        .btn-accent:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(239, 68, 68, 0.4);
        }
        
        /* Powiadomienia */
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            transform: translateX(400px);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 350px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .notification-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }
        
        .notification-icon.info {
            background: var(--primary);
        }
        
        .notification-icon.success {
            background: var(--secondary);
        }
        
        .notification-icon.warning {
            background: var(--accent);
        }
        
        .notification-icon.error {
            background: var(--danger);
        }
        
        /* Efekty tekstu */
        .typewriter {
            overflow: hidden;
            border-right: 2px solid var(--primary);
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        /* Stopka */
        footer {
            margin-top: 40px;
            text-align: center;
            padding: 25px;
            color: var(--text-secondary);
            font-size: 14px;
            border-top: 1px solid var(--border);
            background: rgba(30, 41, 59, 0.5);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        /* Responsywno≈õƒá */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .user-panel {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .text-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .text-stat::after {
                display: none;
            }
            
            .editor-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Animowane t≈Ço -->
    <div class="bg-animation" id="bgAnimation"></div>
    <div class="glow-effect"></div>
    
    <div class="container">
        <!-- Nag≈Ç√≥wek -->
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-globe-americas"></i>
                </div>
                <div>
                    <h1 class="typewriter">Globalny Edytor Tekstu</h1>
                    <div class="logo-subtitle">Tekst widoczny dla wszystkich w czasie rzeczywistym</div>
                </div>
            </div>
            
            <div class="user-panel">
                <!-- Licznik online - PRAWDZIWY -->
                <div class="online-counter" id="onlineCounter">
                    <div class="online-count" id="onlineCount">1</div>
                    <div class="online-label">
                        <i class="fas fa-users"></i>
                        <span>online</span>
                    </div>
                </div>
                
                <!-- Panel u≈ºytkownika -->
                <div class="user-card" id="userCard">
                    <!-- Zostanie wype≈Çnione przez JavaScript -->
                </div>
            </div>
        </header>
        
        <!-- G≈Ç√≥wna zawarto≈õƒá -->
        <div class="main-content">
            <!-- Panel boczny -->
            <div class="sidebar">
                <!-- U≈ºytkownicy online - PRAWDZIWI -->
                <div class="panel">
                    <h2><i class="fas fa-user-check"></i> U≈ºytkownicy online</h2>
                    <div class="users-online-list" id="usersOnlineList">
                        <!-- Zostanie wype≈Çnione przez JavaScript -->
                    </div>
                </div>
                
                <!-- Statystyki globalne -->
                <div class="panel">
                    <h2><i class="fas fa-chart-bar"></i> Statystyki globalne</h2>
                    <div class="global-stats">
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="globalVisits">0</div>
                            <div class="global-stat-label">Wszystkich wizyt</div>
                        </div>
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="totalUsers">0</div>
                            <div class="global-stat-label">Unikalnych u≈ºytk.</div>
                        </div>
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="totalEdits">0</div>
                            <div class="global-stat-label">Edycji tekstu</div>
                        </div>
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="aiEdits">0</div>
                            <div class="global-stat-label">Edycji AI</div>
                        </div>
                    </div>
                </div>
                
                <!-- Ostatnie aktywno≈õci -->
                <div class="panel">
                    <h2><i class="fas fa-history"></i> Ostatnie zmiany</h2>
                    <div class="users-online-list" id="recentActivities">
                        <!-- Zostanie wype≈Çnione przez JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- Edytor g≈Ç√≥wny - GLOBALNY -->
            <div class="editor-container">
                <div class="editor-header">
                    <h2 class="editor-title">
                        <i class="fas fa-edit"></i> Globalny Edytor Tekstu
                    </h2>
                </div>
                
                <div class="global-text-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>To jest globalny tekst!</strong> Wszystko co tu napiszesz bƒôdzie widoczne
                        dla ka≈ºdej osoby na tej stronie. Zmiany sƒÖ widoczne w czasie rzeczywistym.
                    </div>
                </div>
                
                <div class="text-stats">
                    <div class="text-stat">
                        <div class="text-stat-value" id="charCount">0</div>
                        <div class="text-stat-label">Znaki</div>
                    </div>
                    <div class="text-stat">
                        <div class="text-stat-value" id="wordCount">0</div>
                        <div class="text-stat-label">S≈Çowa</div>
                    </div>
                    <div class="text-stat">
                        <div class="text-stat-value" id="lineCount">0</div>
                        <div class="text-stat-label">Linie</div>
                    </div>
                    <div class="text-stat">
                        <div class="text-stat-value" id="lastEditBy">-</div>
                        <div class="text-stat-label">Ostatnio edytowa≈Ç</div>
                    </div>
                </div>
                
                <div class="textarea-container">
                    <textarea id="globalText" placeholder="Wpisz tutaj co≈õ... Tekst bƒôdzie widoczny dla WSZYSTKICH u≈ºytkownik√≥w w czasie rzeczywistym! AI mo≈ºe r√≥wnie≈º edytowaƒá ten tekst..."></textarea>
                    <div class="textarea-overlay">
                        <span id="lastEditTime">Ostatnia edycja: teraz</span>
                    </div>
                </div>
                
                <div class="editor-actions">
                    <button class="btn btn-primary" id="aiEditBtn">
                        <i class="fas fa-robot"></i> Edytuj przez AI
                    </button>
                    <button class="btn btn-secondary" id="formatBtn">
                        <i class="fas fa-magic"></i> Formatuj tekst
                    </button>
                    <button class="btn btn-accent" id="saveLocalBtn">
                        <i class="fas fa-save"></i> Zapisz lokalnie
                    </button>
                    <button class="btn btn-danger" id="clearBtn">
                        <i class="fas fa-trash"></i> Wyczy≈õƒá globalnie
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Stopka -->
        <footer>
            <p><i class="fas fa-globe"></i> Globalny Edytor Tekstu &copy; 2024 | Tekst jest globalny i widoczny dla wszystkich</p>
            <p><i class="fas fa-users"></i> <span id="footerOnlineCount">1</span> os√≥b online | <span id="footerTotalVisits">0</span> wszystkich wizyt</p>
        </footer>
    </div>
    
    <!-- Powiadomienie -->
    <div class="notification" id="notification">
        <div class="notification-header">
            <div class="notification-icon info" id="notificationIcon">
                <i class="fas fa-info-circle"></i>
            </div>
            <h3 id="notificationTitle">Powiadomienie</h3>
        </div>
        <p id="notificationMessage">Witamy w globalnym edytorze!</p>
    </div>

    <script>
        // ============= GLOBALNE ZMIENNE =============
        let currentUser = null;
        let globalText = '';
        let onlineUsers = new Map(); // PRAWDZIWI u≈ºytkownicy online
        let socket = null;
        let isOnline = true;
        let lastPingTime = Date.now();
        
        // ============= INIT =============
        document.addEventListener('DOMContentLoaded', function() {
            // Stw√≥rz animowane t≈Ço
            createBackgroundAnimation();
            
            // Inicjuj u≈ºytkownika
            initUser();
            
            // Po≈ÇƒÖcz z "serwerem" (symulacja)
            connectToGlobalServer();
            
            // Za≈Çaduj globalny tekst
            loadGlobalText();
            
            // Inicjuj edytor
            initEditor();
            
            // Aktualizuj statystyki
            updateGlobalStats();
            
            // Inicjuj event listeners
            initEventListeners();
            
            // Poka≈º powiadomienie
            showNotification('Po≈ÇƒÖczono z globalnym edytorem!', 'success', 
                'Tw√≥j tekst jest widoczny dla wszystkich u≈ºytkownik√≥w.');
            
            // Symuluj utratƒô po≈ÇƒÖczenia
            setupConnectionMonitor();
        });
        
        // ============= ANIMOWANE T≈ÅO =============
        function createBackgroundAnimation() {
            const container = document.getElementById('bgAnimation');
            for (let i = 0; i < 25; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                const size = Math.random() * 150 + 50;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                
                particle.style.animationDuration = `${Math.random() * 25 + 15}s`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                
                // Losowy kolor
                const colors = [
                    'rgba(37, 99, 235, 0.1)',
                    'rgba(16, 185, 129, 0.1)',
                    'rgba(245, 158, 11, 0.1)',
                    'rgba(139, 92, 246, 0.1)'
                ];
                particle.style.background = `radial-gradient(circle, ${colors[Math.floor(Math.random() * colors.length)]}, transparent)`;
                
                container.appendChild(particle);
            }
        }
        
        // ============= SYSTEM U≈ªYTKOWNIK√ìW =============
        function initUser() {
            // Generuj unikalny ID u≈ºytkownika
            const userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            
            // Losowe nazwy u≈ºytkownik√≥w
            const prefixes = ['Byte', 'Cyber', 'Tech', 'Digital', 'Code', 'Web', 'Net', 'Data', 'Info', 'Smart'];
            const suffixes = ['Master', 'Expert', 'Guru', 'Ninja', 'Wizard', 'Pro', 'King', 'Queen', 'Hero', 'Genius'];
            
            const randomName = `@${prefixes[Math.floor(Math.random() * prefixes.length)]}_${suffixes[Math.floor(Math.random() * suffixes.length)]}`;
            
            // Kolory awatar√≥w
            const colors = ['#2563eb', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#14b8a6', '#3b82f6', '#06b6d4'];
            
            // Sprawd≈∫ czy u≈ºytkownik ju≈º istnieje (przez cookies)
            let userData = getCookie('global_editor_user');
            let visitCount = 1;
            
            if (userData) {
                try {
                    const parsed = JSON.parse(userData);
                    currentUser = {
                        ...parsed,
                        id: userId, // Nowe ID ka≈ºdej sesji
                        lastSeen: Date.now(),
                        isOnline: true,
                        visitCount: (parsed.visitCount || 0) + 1
                    };
                    visitCount = currentUser.visitCount;
                } catch (e) {
                    currentUser = createNewUser(userId, randomName, colors);
                }
            } else {
                currentUser = createNewUser(userId, randomName, colors);
            }
            
            // Zapisz w cookies
            setCookie('global_editor_user', JSON.stringify({
                id: currentUser.id,
                username: currentUser.username,
                avatarColor: currentUser.avatarColor,
                visitCount: visitCount,
                firstVisit: currentUser.firstVisit
            }), 365);
            
            // Dodaj do listy online
            onlineUsers.set(currentUser.id, {
                ...currentUser,
                lastActivity: Date.now(),
                isEditing: false
            });
            
            // Zaktualizuj panel u≈ºytkownika
            updateUserPanel();
            
            // Zaktualizuj licznik online
            updateOnlineCounter();
        }
        
        function createNewUser(userId, username, colors) {
            return {
                id: userId,
                username: username,
                avatarColor: colors[Math.floor(Math.random() * colors.length)],
                visitCount: 1,
                firstVisit: new Date().toISOString(),
                lastSeen: Date.now(),
                isOnline: true,
                totalEdits: 0,
                lastEdit: null
            };
        }
        
        function updateUserPanel() {
            const userCard = document.getElementById('userCard');
            userCard.innerHTML = `
                <div class="user-avatar" style="background: ${currentUser.avatarColor}">
                    ${currentUser.username.substring(1, 3).toUpperCase()}
                    <div class="online-dot"></div>
                </div>
                <div class="user-info">
                    <div class="username">
                        ${currentUser.username}
                        <div class="status-dot"></div>
                    </div>
                    <div class="user-status">${currentUser.visitCount} wizyt ‚Ä¢ online</div>
                </div>
            `;
        }
        
        // ============= PO≈ÅƒÑCZENIE Z GLOBALNYM SERWEREM (SYMULACJA) =============
        function connectToGlobalServer() {
            // W rzeczywisto≈õci tutaj by≈Çoby WebSocket po≈ÇƒÖczenie
            // Na potrzeby demo symulujemy dzia≈Çanie
            
            // Pobierz globalny tekst z "serwera" (localStorage)
            const serverText = localStorage.getItem('global_editor_text') || '';
            globalText = serverText;
            
            // Pobierz listƒô u≈ºytkownik√≥w online z "serwera"
            const serverUsers = JSON.parse(localStorage.getItem('global_online_users') || '{}');
            
            // Dodaj bie≈ºƒÖcych u≈ºytkownik√≥w
            for (const [id, user] of Object.entries(serverUsers)) {
                // Usu≈Ñ nieaktywnych (ostatnia aktywno≈õƒá > 30 sekund)
                if (Date.now() - user.lastActivity < 30000) {
                    onlineUsers.set(id, user);
                }
            }
            
            // Dodaj siebie
            onlineUsers.set(currentUser.id, {
                ...currentUser,
                lastActivity: Date.now(),
                isEditing: false
            });
            
            // Zaktualizuj na "serwerze"
            updateServerData();
            
            // Symuluj odbieranie aktualizacji od innych
            simulateOtherUsers();
            
            // Automatyczna synchronizacja
            setInterval(syncWithServer, 2000);
        }
        
        function updateServerData() {
            // Zapisz online users
            const usersObj = {};
            onlineUsers.forEach((user, id) => {
                usersObj[id] = {
                    username: user.username,
                    avatarColor: user.avatarColor,
                    lastActivity: user.lastActivity,
                    isEditing: user.isEditing,
                    visitCount: user.visitCount
                };
            });
            
            localStorage.setItem('global_online_users', JSON.stringify(usersObj));
            
            // Zapisz globalny tekst
            localStorage.setItem('global_editor_text', globalText);
            
            // Zapisz statystyki
            const stats = JSON.parse(localStorage.getItem('global_stats') || '{}');
            stats.totalVisits = (stats.totalVisits || 0) + 1;
            stats.lastUpdate = Date.now();
            localStorage.setItem('global_stats', JSON.stringify(stats));
        }
        
        function simulateOtherUsers() {
            // Co 10-30 sekund symuluj aktywno≈õƒá innych u≈ºytkownik√≥w
            setInterval(() => {
                if (Math.random() > 0.7 && onlineUsers.size > 1) {
                    // Losowy u≈ºytkownik edytuje tekst
                    const randomUserId = Array.from(onlineUsers.keys())[
                        Math.floor(Math.random() * (onlineUsers.size - 1))
                    ];
                    
                    if (randomUserId !== currentUser.id) {
                        const user = onlineUsers.get(randomUserId);
                        
                        // Dodaj do aktywno≈õci
                        addRecentActivity(`${user.username} edytowa≈Ç tekst`);
                        
                        // Od≈õwie≈º listƒô online
                        updateOnlineUsersList();
                    }
                }
            }, Math.random() * 20000 + 10000);
        }
        
        // ============= EDYTOR GLOBALNEGO TEKSTU =============
        function initEditor() {
            const textarea = document.getElementById('globalText');
            textarea.value = globalText;
            updateTextStats(globalText);
            
            // Obs≈Çuga zmian w tek≈õcie
            textarea.addEventListener('input', function(e) {
                const newText = e.target.value;
                
                // Zaktualizuj globalny tekst
                globalText = newText;
                
                // Zaktualizuj statystyki
                updateTextStats(newText);
                
                // Zaktualizuj czas ostatniej edycji
                document.getElementById('lastEditTime').textContent = 
                    `Ostatnia edycja: ${new Date().toLocaleTimeString()}`;
                
                // Zaktualizuj kto edytowa≈Ç
                document.getElementById('lastEditBy').textContent = 
                    currentUser.username.replace('@', '');
                
                // Oznacz siebie jako edytujƒÖcego
                currentUser.isEditing = true;
                currentUser.lastEdit = Date.now();
                currentUser.totalEdits = (currentUser.totalEdits || 0) + 1;
                
                onlineUsers.set(currentUser.id, {
                    ...currentUser,
                    lastActivity: Date.now(),
                    isEditing: true
                });
                
                // Wy≈õlij zmianƒô na "serwer"
                sendTextUpdate(newText);
                
                // Dodaj do historii
                addRecentActivity(`${currentUser.username} edytowa≈Ç tekst`);
                
                // Poka≈º powiadomienie (tylko czasami)
                if (Math.random() > 0.8) {
                    showNotification('Tekst zaktualizowany!', 'success', 
                        'Twoje zmiany sƒÖ widoczne dla wszystkich.');
                }
                
                // Od≈õwie≈º listƒô online
                updateOnlineUsersList();
            });
            
            // Obs≈Çuga focus/blur
            textarea.addEventListener('focus', function() {
                currentUser.isEditing = true;
                onlineUsers.set(currentUser.id, {
                    ...currentUser,
                    lastActivity: Date.now(),
                    isEditing: true
                });
                updateOnlineUsersList();
            });
            
            textarea.addEventListener('blur', function() {
                currentUser.isEditing = false;
                onlineUsers.set(currentUser.id, {
                    ...currentUser,
                    lastActivity: Date.now(),
                    isEditing: false
                });
                updateOnlineUsersList();
            });
        }
        
        function sendTextUpdate(text) {
            // W rzeczywisto≈õci: wys≈Çanie przez WebSocket
            // Na potrzeby demo: zapisz w localStorage
            localStorage.setItem('global_editor_text', text);
            
            // Zaktualizuj statystyki edycji
            const stats = JSON.parse(localStorage.getItem('global_stats') || '{}');
            stats.totalEdits = (stats.totalEdits || 0) + 1;
            stats.lastTextUpdate = Date.now();
            localStorage.setItem('global_stats', JSON.stringify(stats));
        }
        
        function loadGlobalText() {
            const savedText = localStorage.getItem('global_editor_text') || '';
            globalText = savedText;
            
            // Je≈õli jest tekst, poka≈º kto ostatnio edytowa≈Ç
            if (savedText) {
                const stats = JSON.parse(localStorage.getItem('global_stats') || '{}');
                if (stats.lastEditor) {
                    document.getElementById('lastEditBy').textContent = stats.lastEditor;
                }
            }
        }
        
        // ============= LICZNIK ONLINE - PRAWDZIWY =============
        function updateOnlineCounter() {
            // Usu≈Ñ nieaktywnych u≈ºytkownik√≥w (> 30 sekund)
            const now = Date.now();
            for (const [id, user] of onlineUsers) {
                if (now - user.lastActivity > 30000) {
                    onlineUsers.delete(id);
                }
            }
            
            // Zaktualizuj licznik
            const onlineCount = onlineUsers.size;
            document.getElementById('onlineCount').textContent = onlineCount;
            document.getElementById('footerOnlineCount').textContent = onlineCount;
            
            // Zaktualizuj listƒô u≈ºytkownik√≥w online
            updateOnlineUsersList();
        }
        
        function updateOnlineUsersList() {
            const container = document.getElementById('usersOnlineList');
            let html = '';
            
            // Sortuj: najpierw edytujƒÖcy, potem aktywni
            const sortedUsers = Array.from(onlineUsers.values())
                .sort((a, b) => {
                    if (a.isEditing && !b.isEditing) return -1;
                    if (!a.isEditing && b.isEditing) return 1;
                    return b.lastActivity - a.lastActivity;
                });
            
            sortedUsers.forEach(user => {
                const isCurrentUser = user.id === currentUser.id;
                const timeAgo = Math.floor((Date.now() - user.lastActivity) / 1000);
                const timeText = timeAgo < 60 ? 'teraz' : 
                               timeAgo < 120 ? '1 min temu' : 
                               `${Math.floor(timeAgo / 60)} min temu`;
                
                html += `
                    <div class="online-user-item ${isCurrentUser ? 'active' : ''}">
                        <div class="user-avatar" style="background: ${user.avatarColor}; width: 40px; height: 40px; font-size: 16px;">
                            ${user.username.substring(1, 3).toUpperCase()}
                            <div class="online-dot"></div>
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold; display: flex; align-items: center; gap: 8px;">
                                ${user.username}
                                ${isCurrentUser ? '<span style="font-size: 10px; background: var(--primary); color: white; padding: 2px 6px; border-radius: 10px;">Ty</span>' : ''}
                            </div>
                            <div class="user-activity ${user.isEditing ? 'editing' : ''}">
                                ${user.isEditing ? '<i class="fas fa-edit"></i> Edytuje tekst' : `Aktywny ${timeText}`}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html || '<div style="text-align: center; color: var(--text-secondary); padding: 30px;">Brak innych u≈ºytkownik√≥w online</div>';
        }
        
        // ============= STATYSTYKI GLOBALNE =============
        function updateGlobalStats() {
            const stats = JSON.parse(localStorage.getItem('global_stats') || '{}');
            
            // Liczba wszystkich wizyt
            const totalVisits = stats.totalVisits || onlineUsers.size;
            document.getElementById('globalVisits').textContent = formatNumber(totalVisits);
            document.getElementById('footerTotalVisits').textContent = formatNumber(totalVisits);
            
            // Liczba unikalnych u≈ºytkownik√≥w
            const allUsers = JSON.parse(localStorage.getItem('all_users') || '{}');
            const totalUsers = Object.keys(allUsers).length || onlineUsers.size;
            document.getElementById('totalUsers').textContent = formatNumber(totalUsers);
            
            // Liczba edycji
            const totalEdits = stats.totalEdits || 0;
            document.getElementById('totalEdits').textContent = formatNumber(totalEdits);
            
            // Liczba edycji AI
            const aiEdits = stats.aiEdits || 0;
            document.getElementById('aiEdits').textContent = formatNumber(aiEdits);
            
            // Co 10 sekund od≈õwie≈ºaj
            setTimeout(updateGlobalStats, 10000);
        }
        
        function formatNumber(num) {
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'k';
            }
            return num.toString();
        }
        
        // ============= AKTYWNO≈öCI =============
        function addRecentActivity(activity) {
            const container = document.getElementById('recentActivities');
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            const activityItem = document.createElement('div');
            activityItem.className = 'online-user-item';
            activityItem.innerHTML = `
                <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--darker-bg); 
                     display: flex; align-items: center; justify-content: center; color: var(--primary);">
                    <i class="fas fa-history"></i>
                </div>
                <div style="flex: 1;">
                    <div style="font-weight: bold; font-size: 14px;">${activity}</div>
                    <div style="font-size: 12px; color: var(--text-secondary);">${time}</div>
                </div>
            `;
            
            container.insertBefore(activityItem, container.firstChild);
            
            // Zachowaj tylko 5 ostatnich
            if (container.children.length > 5) {
                container.removeChild(container.lastChild);
            }
        }
        
        // ============= PRZYCISKI AKCJI =============
        document.getElementById('aiEditBtn').addEventListener('click', async function() {
            const textarea = document.getElementById('globalText');
            const currentText = textarea.value;
            
            if (!currentText.trim()) {
                showNotification('Wpisz tekst przed u≈ºyciem AI!', 'warning', 'AI potrzebuje tekstu do edycji.');
                return;
            }
            
            // Przycisk ≈Çadowania
            const btn = this;
            const originalHtml = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> AI my≈õli...';
            btn.disabled = true;
            
            try {
                // Symulacja AI
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // R√≥≈ºne akcje AI
                const aiResponses = [
                    `[AI: Doda≈Çem optymistyczny komentarz!]\n\n${currentText}\n\n---\nEdytowane przez AI - wszystko wyglƒÖda ≈õwietnie!`,
                    `${currentText}\n\nü§ñ AI: "Ten tekst jest naprawdƒô interesujƒÖcy!"`,
                    `‚ú® WERSJA ULEPSZONA PRZEZ AI ‚ú®\n\n${currentText.toUpperCase()}\n\n[Zoptymalizowane pod kƒÖtem czytelno≈õci]`,
                    `${currentText}\n\n---\nüí° AI SUGERUJE: Mo≈ºesz dodaƒá wiƒôcej szczeg√≥≈Ç√≥w do tego tekstu!`,
                    `üöÄ ROZWIJAMY TEKST Z AI üöÄ\n\n${currentText}\n\n+ Dodane przez AI: Tekst zyska≈Ç na warto≈õci dziƒôki sztucznej inteligencji!`
                ];
                
                const aiText = aiResponses[Math.floor(Math.random() * aiResponses.length)];
                textarea.value = aiText;
                
                // Wywo≈Çaj event input
                const event = new Event('input', { bubbles: true });
                textarea.dispatchEvent(event);
                
                // Zaktualizuj statystyki AI
                const stats = JSON.parse(localStorage.getItem('global_stats') || '{}');
                stats.aiEdits = (stats.aiEdits || 0) + 1;
                localStorage.setItem('global_stats', JSON.stringify(stats));
                
                addRecentActivity('AI edytowa≈Ço tekst');
                
                showNotification('AI edytowa≈Ço tekst!', 'success', 'Sztuczna inteligencja doda≈Ça swoje poprawki.');
                
            } catch (error) {
                showNotification('B≈ÇƒÖd AI!', 'error', 'Spr√≥buj ponownie za chwilƒô.');
            } finally {
                btn.innerHTML = originalHtml;
                btn.disabled = false;
            }
        });
        
        document.getElementById('formatBtn').addEventListener('click', function() {
            const textarea = document.getElementById('globalText');
            let text = textarea.value;
            
            text = text
                .replace(/\n{3,}/g, '\n\n')
                .replace(/[ \t]+/g, ' ')
                .replace(/([.!?])\s+(?=[A-Z])/g, '$1\n\n')
                .trim();
            
            textarea.value = text;
            const event = new Event('input', { bubbles: true });
            textarea.dispatchEvent(event);
            
            showNotification('Tekst sformatowany!', 'success');
        });
        
        document.getElementById('saveLocalBtn').addEventListener('click', function() {
            const text = document.getElementById('globalText').value;
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `global-editor-${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Tekst zapisany lokalnie!', 'success');
        });
        
        document.getElementById('clearBtn').addEventListener('click', function() {
            if (confirm('CZY NA PEWNO CHCESZ WYCZY≈öCIƒÜ GLOBALNY TEKST?\n\nTa akcja usunie tekst dla WSZYSTKICH u≈ºytkownik√≥w!')) {
                const textarea = document.getElementById('globalText');
                textarea.value = '';
                
                const event = new Event('input', { bubbles: true });
                textarea.dispatchEvent(event);
                
                addRecentActivity(`${currentUser.username} wyczy≈õci≈Ç globalny tekst`);
                
                showNotification('Tekst wyczyszczony globalnie!', 'warning', 
                    'Wszyscy u≈ºytkownicy widzƒÖ teraz pusty edytor.');
            }
        });
        
        // ============= STATYSTYKI TEKSTU =============
        function updateTextStats(text) {
            const chars = text.length;
            const words = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            const lines = text.split('\n').length;
            
            document.getElementById('charCount').textContent = chars;
            document.getElementById('wordCount').textContent = words;
            document.getElementById('lineCount').textContent = lines;
        }
        
        // ============= SYNCHRONIZACJA =============
        function syncWithServer() {
            // Sprawd≈∫ czy tekst siƒô zmieni≈Ç na "serwerze"
            const serverText = localStorage.getItem('global_editor_text') || '';
            const currentText = document.getElementById('globalText').value;
            
            if (serverText !== currentText) {
                // Tekst zmieni≈Ç siƒô na serwerze (kto≈õ inny edytowa≈Ç)
                document.getElementById('globalText').value = serverText;
                globalText = serverText;
                updateTextStats(serverText);
                
                // Poka≈º powiadomienie o zmianie
                const stats = JSON.parse(localStorage.getItem('global_stats') || '{}');
                if (stats.lastEditor && stats.lastEditor !== currentUser.username) {
                    showNotification('Tekst zaktualizowany!', 'info', 
                        `${stats.lastEditor} w≈Ça≈õnie edytowa≈Ç tekst.`);
                }
            }
            
            // Zaktualizuj swojƒÖ aktywno≈õƒá
            currentUser.lastActivity = Date.now();
            onlineUsers.set(currentUser.id, currentUser);
            
            // Od≈õwie≈º licznik online
            updateOnlineCounter();
            
            // Zaktualizuj dane na "serwerze"
            updateServerData();
        }
        
        // ============= MONITOR PO≈ÅƒÑCZENIA =============
        function setupConnectionMonitor() {
            // Sprawdzaj po≈ÇƒÖczenie co 5 sekund
            setInterval(() => {
                const now = Date.now();
                if (now - lastPingTime > 10000) { // 10 sekund bez aktywno≈õci
                    isOnline = false;
                    showNotification('Utracono po≈ÇƒÖczenie!', 'error', 
                        'Pr√≥bujƒô ponownie po≈ÇƒÖczyƒá...');
                    
                    // Pr√≥buj ponownie
                    setTimeout(() => {
                        connectToGlobalServer();
                        isOnline = true;
                        lastPingTime = Date.now();
                        showNotification('Po≈ÇƒÖczenie przywr√≥cone!', 'success');
                    }, 3000);
                }
            }, 5000);
        }
        
        // ============= POWIADOMIENIA =============
        function showNotification(title, type, message = '') {
            const notification = document.getElementById('notification');
            const icon = document.getElementById('notificationIcon');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');
            
            // Ustaw typ
            notification.className = 'notification';
            icon.className = 'notification-icon ' + type;
            icon.innerHTML = {
                'info': '<i class="fas fa-info-circle"></i>',
                'success': '<i class="fas fa-check-circle"></i>',
                'warning': '<i class="fas fa-exclamation-triangle"></i>',
                'error': '<i class="fas fa-times-circle"></i>'
            }[type];
            
            titleEl.textContent = title;
            messageEl.textContent = message;
            
            // Poka≈º
            notification.classList.add('show');
            
            // Ukryj po 4 sekundach
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
        
        // ============= EVENT LISTENERS =============
        function initEventListeners() {
            // Aktualizuj aktywno≈õƒá przy interakcjach
            document.addEventListener('mousemove', updateUserActivity);
            document.addEventListener('keydown', updateUserActivity);
            document.addEventListener('click', updateUserActivity);
            
            // Auto-save co 30 sekund
            setInterval(() => {
                localStorage.setItem('global_editor_text_backup', globalText);
            }, 30000);
        }
        
        function updateUserActivity() {
            lastPingTime = Date.now();
            currentUser.lastActivity = Date.now();
        }
        
        // ============= COOKIES =============
        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + d.toUTCString();
            document.cookie = name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/;SameSite=Lax";
        }
        
        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1);
                if (c.indexOf(nameEQ) === 0) return decodeURIComponent(c.substring(nameEQ.length));
            }
            return null;
        }
    </script>
</body>
</html>
